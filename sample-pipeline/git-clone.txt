pipeline {
    agent any

    environment {
        GIT_SSL_NO_VERIFY = 'true'  // SSL verify ignore
    }

    stages {
        stage('Clone') {
            steps {
                withCredentials([
                    usernamePassword(
                        credentialsId: 'gitlab-user-jks-pw', 
                        usernameVariable: 'USER', 
                        passwordVariable: 'TOKEN'
                    )
                ]) {
                    sh '''
                        git config --global http.sslVerify false
                        rm -rf java-project       # ì´ì „ ë¹Œë“œ ì”ì—¬ë¬¼ ì‚­ì œ
                        git clone https://${USER}:${TOKEN}@192.168.0.12:7743/JKS/java-project.git
                    '''
                }
            }
        }
    }

    post {
        success {
            echo "âœ… ì „ì²´ Pipeline ì„±ê³µ"
        }
        failure {
            echo "âŒ Pipeline ì‹¤íŒ¨"
        }
        always {
            echo "ğŸ”„ Pipeline ì¢…ë£Œ"
        }
    }
}